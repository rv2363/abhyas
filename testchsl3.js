const sections = [
    //Maths Section
    [
        {
          "question": "What is the value of 12% of 450?",
          "options": ["50", "52", "54", "56"],
          "answer": "54"
        },
        {
          "question": "If x/3 = 8, then what is the value of x?",
          "options": ["16", "20", "24", "28"],
          "answer": "24"
        },
        {
          "question": "A shopkeeper sells an item for ₹600, gaining a profit of 20%. What was the cost price?",
          "options": ["₹480", "₹500", "₹520", "₹550"],
          "answer": "₹500"
        },
        {
          "question": "What is the simple interest on ₹800 for 2 years at a rate of 5% per annum?",
          "options": ["₹60", "₹70", "₹80", "₹90"],
          "answer": "₹80"
        },
        {
          "question": "If the average of 6 numbers is 18, what is their sum?",
          "options": ["96", "102", "108", "114"],
          "answer": "108"
        },
        {
          "question": "What is the value of (15 + 3) / 6 * 2?",
          "options": ["4", "6", "8", "10"],
          "answer": "6"
        },
        {
          "question": "A train travels 150 km in 3 hours. What is its speed?",
          "options": ["40 km/hr", "45 km/hr", "50 km/hr", "55 km/hr"],
          "answer": "50 km/hr"
        },
        {
          "question": "If 2x + 7 = 19, then what is the value of x?",
          "options": ["4", "5", "6", "7"],
          "answer": "6"
        },
        {
          "question": "What is the area of a square with side length 9 cm?",
          "options": ["64 cm²", "72 cm²", "81 cm²", "90 cm²"],
          "answer": "81 cm²"
        },
        {
          "question": "If a = 5 and b = 3, what is the value of a² - b²?",
          "options": ["8", "12", "16", "20"],
          "answer": "16"
        },
        {
          "question": "What is the value of √169?",
          "options": ["11", "12", "13", "14"],
          "answer": "13"
        },
        {
          "question": "Convert 0.6 to a fraction.",
          "options": ["1/3", "2/5", "3/5", "4/5"],
          "answer": "3/5"
        },
        {
          "question": "If a car travels at 50 km/hr, how far does it travel in 2.5 hours?",
          "options": ["100 km", "110 km", "120 km", "125 km"],
          "answer": "125 km"
        },
        {
          "question": "What is the value of 4³?",
          "options": ["12", "16", "64", "256"],
          "answer": "64"
        },
        {
          "question": "Find the average of 12, 18, and 24.",
          "options": ["16", "18", "20", "22"],
          "answer": "18"
        },
        {
          "question": "If the cost of 4 books is ₹80, what is the cost of 1 book?",
          "options": ["₹15", "₹20", "₹25", "₹30"],
          "answer": "₹20"
        },
        {
          "question": "What is the value of 15% of 160?",
          "options": ["20", "22", "24", "26"],
          "answer": "24"
        },
        {
          "question": "Solve for x: x/5 = 7",
          "options": ["28", "30", "35", "40"],
          "answer": "35"
        },
        {
          "question": "What is the perimeter of a rectangle with length 12 cm and width 8 cm?",
          "options": ["36 cm", "40 cm", "42 cm", "44 cm"],
          "answer": "40 cm"
        },
        {
          "question": "If 4x + 9 = 25, then x = ?",
          "options": ["3", "4", "5", "6"],
          "answer": "4"
        },
        {
          "question": "What is the value of 3^4?",
          "options": ["27", "81", "243", "729"],
          "answer": "81"
        },
        {
          "question": "Find the value of 20% of 90.",
          "options": ["16", "18", "20", "22"],
          "answer": "18"
        },
        {
          "question": "What is the value of 1/3 + 1/6?",
          "options": ["1/9", "1/6", "1/3", "1/2"],
          "answer": "1/2"
        },
        {
          "question": "If a train travels 200 km in 4 hours, what is its average speed?",
          "options": ["40 km/hr", "50 km/hr", "60 km/hr", "70 km/hr"],
          "answer": "50 km/hr"
        },
        {
          "question": "What is the value of √196?",
          "options": ["12", "13", "14", "15"],
          "answer": "14"
        }
      ],
    // Reasoning Section
    [
        {
          "question": "Select the related word/letters/number from the given alternatives: ACE : FHJ :: PRT : ?",
          "options": ["UVW", "SUW", "SVW", "TVX"],
          "answer": "SUW"
        },
        {
          "question": "Select the odd word/letters/number/number pair from the given alternatives.",
          "options": ["Circle", "Square", "Triangle", "Volume"],
          "answer": "Volume"
        },
        {
          "question": "A series is given with one term missing. Select the correct alternative from the given ones that will complete the series: 5, 11, 23, 47, ?",
          "options": ["95", "65", "85", "75"],
          "answer": "95"
        },
        {
          "question": "If 'PAINT' is coded as '74128' and 'EXCEL' is coded as '93596', then how will 'ACCEPT' be coded?",
          "options": ["455978", "547978", "554978", "554798"],
          "answer": "554798"
        },
        {
          "question": "Introducing a man, a woman said, 'His wife is the only daughter of my mother.' How is the woman related to the man?",
          "options": ["Sister", "Aunt", "Mother", "Wife"],
          "answer": "Wife"
        },
        {
          "question": "How many triangles are there in the given figure? (Figure provided)",
          "options": ["10", "12", "15", "18"],
          "answer": "18"
        },
        {
          "question": "From the given alternatives, select the word which cannot be formed using the letters of the given word: 'ADMINISTRATION'",
          "options": ["NATION", "TRAIN", "SITUATION", "MINISTER"],
          "answer": "MINISTER"
        },
        {
          "question": "If '+' means '-', '-' means '×', '×' means '÷' and '÷' means '+', then 16 × 8 ÷ 4 + 2 - 10 = ?",
          "options": ["2", "12", "16", "20"],
          "answer": "2"
        },
        {
          "question": "Select the related word/letters/number from the given alternatives: 18 : 30 :: 36 : ?",
          "options": ["62", "64", "66", "68"],
          "answer": "66"
        },
        {
          "question": "Select the odd word/letters/number/number pair from the given alternatives.",
          "options": ["Chair", "Table", "Bed", "Building"],
          "answer": "Building"
        },
        {
          "question": "A series is given with one term missing. Select the correct alternative from the given ones that will complete the series: BZA, DYC, FXE, ?",
          "options": ["HUG", "HWG", "UHG", "WHG"],
          "answer": "HWG"
        },
        {
          "question": "If 'BROTHER' is coded as '2456784' and 'SISTER' is coded as '969874', what is the code for 'ROBERS'?",
          "options": ["482679", "462879", "648279", "684279"],
          "answer": "482679"
        },
        {
          "question": "Pointing to a photograph, a man said, 'I have no brother or sister but that man's father is my father's son.' Whose photograph was it?",
          "options": ["His son", "His nephew", "His father", "His grandfather"],
          "answer": "His son"
        },
        {
          "question": "How many squares are there in the given figure? (Figure provided)",
          "options": ["8", "10", "12", "14"],
          "answer": "14"
        },
        {
          "question": "From the given alternatives, select the word which can be formed using the letters of the given word: 'DETERMINATION'",
          "options": ["NATION", "MIND", "TRAIN", "ROAD"],
          "answer": "NATION"
        },
        {
          "question": "If 'P' denotes '÷', 'Q' denotes '×', 'R' denotes '+' and 'S' denotes '-', then 18 Q 12 P 4 R 5 S 6 = ?",
          "options": ["53", "57", "59", "63"],
          "answer": "53"
        },
        {
          "question": "Select the related word/letters/number from the given alternatives: 12 : 144 :: 15 : ?",
          "options": ["225", "250", "275", "300"],
          "answer": "225"
        },
        {
          "question": "Select the odd word/letters/number/number pair from the given alternatives.",
          "options": ["January", "March", "June", "August"],
          "answer": "June"
        },
        {
          "question": "A series is given with one term missing. Select the correct alternative from the given ones that will complete the series: 3, 8, 15, 24, ?",
          "options": ["35", "36", "37", "38"],
          "answer": "35"
        },
        {
          "question": "If 'LIME' is coded as '4936' and 'GAME' is coded as '2576', then how will 'MEAL' be coded?",
          "options": ["6374", "6437", "6347", "6473"],
          "answer": "6347"
        },
        {
          "question": "A is B's sister. C is B's mother. D is C's father. E is D's mother. Then, how is A related to D?",
          "options": ["Granddaughter", "Daughter", "Aunt", "Mother"],
          "answer": "Granddaughter"
        },
        {
          "question": "How many circles are there in the given figure? (Figure provided)",
          "options": ["5", "6", "7", "8"],
          "answer": "7"
        },
        {
          "question": "From the given alternatives, select the word which cannot be formed using the letters of the given word: 'ENVIRONMENT'",
          "options": ["ENTER", "MOVE", "MENTION", "REMIT"],
          "answer": "REMIT"
        },
        {
          "question": "If 'A' means '+', 'B' means '-', 'C' means '×' and 'D' means '÷', then 18 C 14 A 6 B 16 D 4 = ?",
          "options": ["254", "258", "260", "262"],
          "answer": "254"
        }
      ],

    // GK/GS/Current Affairs Section
    [
        {
          "question": "Which of the following is the highest civilian award in India?",
          "options": ["Padma Vibhushan", "Bharat Ratna", "Padma Bhushan", "Padma Shri"],
          "answer": "Bharat Ratna"
        },
        {
          "question": "The 'Right to Information Act' (RTI) was passed in which year?",
          "options": ["2002", "2005", "2008", "2010"],
          "answer": "2005"
        },
        {
          "question": "Which Indian state is known as the 'Spice Garden of India'?",
          "options": ["Kerala", "Karnataka", "Tamil Nadu", "Andhra Pradesh"],
          "answer": "Kerala"
        },
        {
          "question": "Who was the first Indian to win the Nobel Prize in Physics?",
          "options": ["Homi J. Bhabha", "C. V. Raman", "Satyendra Nath Bose", "Subrahmanyan Chandrasekhar"],
          "answer": "C. V. Raman"
        },
        {
          "question": "The 'East India Company' was formed in which year?",
          "options": ["1500", "1600", "1700", "1800"],
          "answer": "1600"
        },
        {
          "question": "Which of the following is a folk dance of Rajasthan?",
          "options": ["Bihu", "Garba", "Ghoomar", "Lavani"],
          "answer": "Ghoomar"
        },
        {
          "question": "The 'Indian Space Research Organisation' (ISRO) was established in which year?",
          "options": ["1962", "1969", "1975", "1980"],
          "answer": "1969"
        },
        {
          "question": "Which river originates from the 'Mansarovar Lake' in Tibet?",
          "options": ["Ganga", "Yamuna", "Brahmaputra", "Godavari"],
          "answer": "Brahmaputra"
        },
        {
          "question": "The 'Jallikattu' festival is associated with which Indian state?",
          "options": ["Kerala", "Tamil Nadu", "Andhra Pradesh", "Karnataka"],
          "answer": "Tamil Nadu"
        },
        {
          "question": "Who wrote the book 'Arthashastra'?",
          "options": ["Kalidas", "Chanakya", "Banabhatta", "Tulsidas"],
          "answer": "Chanakya"
        },
        {
          "question": "Which of the following is a major iron ore producing state in India?",
          "options": ["Rajasthan", "Gujarat", "Odisha", "Punjab"],
          "answer": "Odisha"
        },
        {
          "question": "The 'Statue of Unity' is dedicated to whom?",
          "options": ["Mahatma Gandhi", "Jawaharlal Nehru", "Sardar Vallabhbhai Patel", "Subhas Chandra Bose"],
          "answer": "Sardar Vallabhbhai Patel"
        },
        {
          "question": "Which gas is used in fire extinguishers?",
          "options": ["Oxygen", "Nitrogen", "Carbon dioxide", "Hydrogen"],
          "answer": "Carbon dioxide"
        },
        {
          "question": "The 'Khajuraho Temples' are located in which Indian state?",
          "options": ["Rajasthan", "Madhya Pradesh", "Gujarat", "Uttar Pradesh"],
          "answer": "Madhya Pradesh"
        },
        {
          "question": "Which of the following is a water-soluble vitamin?",
          "options": ["Vitamin A", "Vitamin D", "Vitamin E", "Vitamin B"],
          "answer": "Vitamin B"
        },
        {
          "question": "The 'Chipko Movement' was related to which issue?",
          "options": ["Water conservation", "Forest conservation", "Wildlife conservation", "Soil conservation"],
          "answer": "Forest conservation"
        },
        {
          "question": "Which city is known as the 'Electronic City of India'?",
          "options": ["Mumbai", "Delhi", "Bengaluru", "Hyderabad"],
          "answer": "Bengaluru"
        },
        {
          "question": "The 'Battle of Plassey' was fought in which year?",
          "options": ["1757", "1764", "1857", "1805"],
          "answer": "1757"
        },
        {
          "question": "Which of the following is a classical dance form of Andhra Pradesh?",
          "options": ["Kathak", "Kuchipudi", "Odissi", "Manipuri"],
          "answer": "Kuchipudi"
        },
        {
          "question": "The 'National Emblem of India' is adopted from which ancient structure?",
          "options": ["Sanchi Stupa", "Ajanta Caves", "Sarnath Lion Capital", "Ellora Caves"],
          "answer": "Sarnath Lion Capital"
        },
        {
          "question": "Which Indian state has the highest literacy rate?",
          "options": ["Kerala", "Goa", "Mizoram", "Himachal Pradesh"],
          "answer": "Kerala"
        },
        {
          "question": "The 'Salt Satyagraha' was started in which year?",
          "options": ["1920", "1930", "1942", "1947"],
          "answer": "1930"
        },
        {
          "question": "Which of the following is a non-renewable source of energy?",
          "options": ["Solar energy", "Wind energy", "Coal", "Hydropower"],
          "answer": "Coal"
        },
        {
          "question": "Who is known as the 'Father of Indian Cinema'?",
          "options": ["Satyajit Ray", "Dadasaheb Phalke", "Raj Kapoor", "Guru Dutt"],
          "answer": "Dadasaheb Phalke"
        },
        {
          "question": "The 'Golden Temple' is located in which Indian city?",
          "options": ["Delhi", "Jaipur", "Amritsar", "Lucknow"],
          "answer": "Amritsar"
        }
      ],
    //english
    [
        {
          "question": "Select the most appropriate synonym of 'CONTRIVE'.",
          "options": ["Destroy", "Invent", "Neglect", "Disregard"],
          "answer": "Invent"
        },
        {
          "question": "Choose the antonym of 'EXPLICIT'.",
          "options": ["Clear", "Vague", "Obvious", "Precise"],
          "answer": "Vague"
        },
        {
          "question": "Identify the correctly spelt word.",
          "options": ["Occasion", "Ocasion", "Occassion", "Ocassion"],
          "answer": "Occasion"
        },
        {
          "question": "Fill in the blank with the appropriate preposition: 'The cat jumped ______ the table.'",
          "options": ["in", "on", "into", "at"],
          "answer": "on"
        },
        {
          "question": "Select the most appropriate meaning of the idiom: 'To play fast and loose'.",
          "options": ["To be consistent", "To treat dishonestly", "To be straightforward", "To be reliable"],
          "answer": "To treat dishonestly"
        },
        {
          "question": "Choose the one word substitution for 'A person who collects coins'.",
          "options": ["Philatelist", "Numismatist", "Cartographer", "Lexicographer"],
          "answer": "Numismatist"
        },
        {
          "question": "Identify the part of the sentence that has an error: 'He is one of the best students that has ever lived.'",
          "options": ["He is one of", "the best students", "that has ever lived", "No error"],
          "answer": "that has ever lived"
        },
        {
          "question": "Select the most appropriate passive form of the given sentence: 'The police caught the thief.'",
          "options": ["The thief was caught by the police.", "The thief is caught by the police.", "The thief has been caught by the police.", "The thief had been caught by the police."],
          "answer": "The thief was caught by the police."
        },
        {
          "question": "Choose the correct indirect form of the sentence: 'She said, 'Are you coming?'",
          "options": ["She asked if I am coming.", "She asked if I was coming.", "She asked if I will come.", "She asked are you coming."],
          "answer": "She asked if I was coming."
        },
        {
          "question": "Fill in the blank with the correct article: 'He is ______ European citizen.'",
          "options": ["a", "an", "the", "no article"],
          "answer": "a"
        },
        {
          "question": "Select the most appropriate synonym of 'REPEL'.",
          "options": ["Attract", "Invite", "Reject", "Welcome"],
          "answer": "Reject"
        },
        {
          "question": "Choose the antonym of 'NOVICE'.",
          "options": ["Beginner", "Expert", "Amateur", "Learner"],
          "answer": "Expert"
        },
        {
          "question": "Identify the correctly spelt word.",
          "options": ["Accomodation", "Accommodation", "Acommodation", "Acomodation"],
          "answer": "Accommodation"
        },
        {
          "question": "Fill in the blank with the appropriate preposition: 'He is keen ______ learning new things.'",
          "options": ["at", "on", "in", "for"],
          "answer": "on"
        },
        {
          "question": "Select the most appropriate meaning of the idiom: 'To call a spade a spade'.",
          "options": ["To speak indirectly", "To speak frankly", "To speak politely", "To speak vaguely"],
          "answer": "To speak frankly"
        },
        {
          "question": "Choose the one word substitution for 'A person who is indifferent to pain or pleasure'.",
          "options": ["Hedonist", "Stoic", "Epicurean", "Ascetic"],
          "answer": "Stoic"
        },
        {
          "question": "Identify the part of the sentence that has an error: 'Neither of the two sisters are helpful.'",
          "options": ["Neither of the two", "sisters are", "helpful", "No error"],
          "answer": "sisters are"
        },
        {
          "question": "Select the most appropriate passive form of the given sentence: 'They have built a new bridge.'",
          "options": ["A new bridge was built by them.", "A new bridge is built by them.", "A new bridge has been built by them.", "A new bridge had been built by them."],
          "answer": "A new bridge has been built by them."
        },
        {
          "question": "Choose the correct indirect form of the sentence: 'He said, 'Let's go for a walk.'",
          "options": ["He suggested that they go for a walk.", "He said that they went for a walk.", "He said that they will go for a walk.", "He said let's go for a walk."],
          "answer": "He suggested that they go for a walk."
        },
        {
          "question": "Fill in the blank with the correct article: 'She is ______ honorable person.'",
          "options": ["a", "an", "the", "no article"],
          "answer": "an"
        },
        {
          "question": "Select the most appropriate synonym of 'RELINQUISH'.",
          "options": ["Retain", "Abandon", "Keep", "Hold"],
          "answer": "Abandon"
        },
        {
          "question": "Choose the antonym of 'AMIABLE'.",
          "options": ["Friendly", "Hostile", "Affable", "Genial"],
          "answer": "Hostile"
        },
        {
          "question": "Identify the correctly spelt word.",
          "options": ["Guarantee", "Guaranttee", "Guarente", "Guaranty"],
          "answer": "Guarantee"
        },
        {
          "question": "Fill in the blank with the appropriate preposition: 'He is famous ______ his honesty.'",
          "options": ["for", "at", "in", "with"],
          "answer": "for"
        },
        {
          "question": "Select the most appropriate meaning of the idiom: 'To kick the bucket'.",
          "options": ["To succeed", "To fail", "To die", "To celebrate"],
          "answer": "To die"
        }
      ]
      
]
let currentSection = 0;
let currentQuestion = 0;
let answers = {};
let markedForReview = [];
let skippedQuestions = [];
let timeLeft = 60 * 60;
let timerInterval;

// Start Timer
function startTimer() {
timerInterval = setInterval(function () {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    document.getElementById("timer").innerText = `Time Left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    if (timeLeft === 0) {
        clearInterval(timerInterval);
        submitTest();
    }
    timeLeft--;
}, 1000);
}

// Load Question
function loadQuestion(index) {
const q = sections[currentSection][index];
document.getElementById("question").innerText = `${getQuestionNumber(index)}. ${q.question}`;
const options = q.options.map((option, i) => `
    <input type="radio" name="answer" id="opt${i}" value="${option}" ${answers[`${currentSection}-${index}`] === option ? "checked" : ""}>
    <label for="opt${i}">${option}</label><br>
`).join("");
document.getElementById("options").innerHTML = options;
}



// Get Correct Question Number
function getQuestionNumber(index) {
return currentSection * 25 + index + 1;
}

// Store Answer
function storeAnswer() {
const selectedOption = document.querySelector('input[name="answer"]:checked');
if (selectedOption) {
    answers[`${currentSection}-${currentQuestion}`] = selectedOption.value;
}
}

// Switch Section
function switchSection(sectionIndex) {
storeAnswer();
currentSection = sectionIndex;
currentQuestion = 0;
loadQuestion(currentQuestion);
updateSectionBar();
}

// Highlight Active Section
function updateSectionBar() {
document.querySelectorAll('.section-bar button').forEach((btn, index) => {
    if (index === currentSection) {
        btn.classList.add('active');
    } else {
        btn.classList.remove('active');
    }
});
}

// Mark for Review
function markForReview() {
const qIndex = `${currentSection}-${currentQuestion}`;
if (!markedForReview.includes(qIndex)) {
    markedForReview.push(qIndex);
    updateReviewList();
    // alert("Question marked for review.");
}
}

// Skip Question
// Skip Question
function skipQuestion() {
const qIndex = `${currentSection}-${currentQuestion}`;

// Add skipped status to the button
if (!skippedQuestions.includes(qIndex)) {
    skippedQuestions.push(qIndex);
}

// Update button color for skipped question
const questionNumber = getQuestionNumber(currentQuestion);
const skippedBtn = document.getElementById(`btn${questionNumber}`);
if (skippedBtn) {
    skippedBtn.classList.add("skipped"); // Add skipped class
}

nextQuestion(); // Move to next question after skipping
}


// Next Question
function nextQuestion() {
storeAnswer();
if (currentQuestion < sections[currentSection].length - 1) {
    currentQuestion++;
    loadQuestion(currentQuestion);
    updateQuestionPanel(); // Update button status
} else {
    alert("You have reached the last question in this section.");
}
}

// Previous Question
function previousQuestion() {
storeAnswer(); // Save current answer before moving
if (currentQuestion > 0) {
    currentQuestion--; // Move to previous question
    loadQuestion(currentQuestion);
    updateQuestionPanel();
} 
else {
    alert("You are at the first question in this section.");
}
}


// Submit Test
function submitTest() {
storeAnswer(); // Save the current answer
clearInterval(timerInterval); // Stop the timer
calculateResult(); // Calculate the result

// Hide modal if visible
const modal = document.getElementById("exitModal");
if (modal) modal.classList.add("hidden");

// Show result and solutions
document.getElementById("result").classList.remove("hidden");
document.getElementById("solutions").classList.remove("hidden");

// Hide navigation and control buttons after submission
document.querySelectorAll(".nav-btn, #markReviewBtn, #skipBtn, #submitBtn").forEach(btn => {
    btn.style.display = "none";
});

// Hide question panel after submission
document.getElementById("questionPanel").style.display = "none";

// Hide question container after submission
document.getElementById("question-container").style.display = "none";

// Hide horizontal panel after submission
 document.querySelector(".panel-container").style.display = "none";

// Hide all section buttons after submission
document.querySelectorAll(".section-bar button").forEach(btn => {
    btn.style.display = "none";
});

 // Hide the section bar itself after submission
 document.querySelector(".section-bar").style.display = "none";

// Hide all other buttons if any
document.querySelectorAll("button").forEach(btn => {
    btn.style.display = "none";
});

// Hide the timer after submission
document.getElementById("timer").style.display = "none";

 // Disable all answer options after submission
disableOptions(); 
}
function confirmExit() {
document.getElementById("exitModal").classList.remove("hidden");
}

function closeExitModal() {
document.getElementById("exitModal").classList.add("hidden");
}


// Calculate Result
function calculateResult() {
let score = 0;
let correctCount = 0;
let wrongCount = 0;
let unattemptedCount = 0;
let totalQuestions = 100; // Total number of questions
let solutionText = "<h3>Solutions:</h3>";
let solutionCounter = 1; // Counter for solution numbering (from 1 to 100)

sections.forEach((section, sIndex) => {
    section.forEach((q, qIndex) => {
        const qID = `${sIndex}-${qIndex}`;
        const userAnswer = answers[qID] || "No Answer";
        const correctAnswer = q.answer;

        // Check correctness
        if (userAnswer === correctAnswer) {
            score += 2; // Correct answer +2
            correctCount++;
            solutionText += `
                <div style="margin-bottom: 10px;">
                    <b>${solutionCounter}. ${q.question}</b><br>
                    Your Answer: <b>${userAnswer}</b> | Correct Answer: <b>${correctAnswer}</b><br>
                    <span style="color:green;">Correct ✔️ (+2)</span>
                </div>`;
        } 
        else if (userAnswer === "No Answer") {
            unattemptedCount++;
            solutionText += `
                <div style="margin-bottom: 10px;">
                    <b>${solutionCounter}. ${q.question}</b><br>
                    <span style="color:orange;">Not Attempted ❗ (0)</span><br>
                    Correct Answer: <b>${correctAnswer}</b>
                </div>`;
        } 
        else {
            score -= 0.25; // Wrong answer -0.25
            wrongCount++;
            solutionText += `
                <div style="margin-bottom: 10px;">
                    <b>${solutionCounter}. ${q.question}</b><br>
                    Your Answer: <b>${userAnswer}</b> | Correct Answer: <b>${correctAnswer}</b><br>
                    <span style="color:red;">Wrong ❌ (-0.25)</span>
                </div>`;
        }
        solutionCounter++; // Increment solution counter
    });
});

// Calculate total marks out of 200
let totalMarks = 200;

// Display results
document.getElementById("result").innerHTML = `
    <h3>Total Marks: ${score} / ${totalMarks}</h3>
    <div id="summary">
        <p>✅ Correct Answers: <b>${correctCount}</b> | Marks: <b>${correctCount * 2}</b></p>
        <p>❌ Wrong Answers: <b>${wrongCount}</b> | Deducted: <b>${(wrongCount * 0.25).toFixed(2)}</b></p>
        <p>⏩ Not Attempted: <b>${unattemptedCount}</b></p>
    </div>
`;
document.getElementById("solutions").innerHTML = solutionText;
}

// Update Review List
function updateReviewList() {
document.getElementById("reviewed-questions").innerHTML = `Marked for Review: ${markedForReview.join(", ")}`;
}

// Disable Options after Submission
function disableOptions() {
document.querySelectorAll('input[name="answer"]').forEach(option => {
    option.disabled = true; // Disable only question options
});
}
function updateQuestionStatus() {
let statusHTML = "";
let totalQuestions = sections.reduce((sum, section) => sum + section.length, 0);

for (let i = 0; i < totalQuestions; i++) {
    const sectionIndex = Math.floor(i / 25);
    const questionIndex = i % 25;
    const qIndex = `${sectionIndex}-${questionIndex}`;
    
    if (markedForReview.includes(qIndex)) {
        statusHTML += `<div class="question-status review">🔍 Q${i + 1}: Marked for Review</div>`;
    } 
    else if (answers[qIndex]) {
        statusHTML += `<div class="question-status attempted">✅ Q${i + 1}: Attempted</div>`;
    } 
    else {
        statusHTML += `<div class="question-status not-attempted">❌ Q${i + 1}: Not Attempted</div>`;
    }
}
document.getElementById("questionStatusList").innerHTML = statusHTML;
}

// Total number of questions
const totalQuestions = 100;

// Generate question buttons dynamically
function createQuestionButtons() {
const questionPanel = document.getElementById("questionPanel");
questionPanel.innerHTML = ""; // Clear previous buttons

for (let i = 1; i <= totalQuestions; i++) {
    const btn = document.createElement("button");
    btn.innerText = i;
    btn.className = "question-btn";
    btn.id = `btn${i}`;
    btn.onclick = () => handleQuestionClick(i); // Attach click event
    questionPanel.appendChild(btn);
}
}


// Handle Question Button Click
function handleQuestionClick(questionNumber) {
storeAnswer(); // Save current answer before switching
const sectionIndex = Math.floor((questionNumber - 1) / 25); // Get section based on question number
const questionIndex = (questionNumber - 1) % 25; // Get question index in the section

if (sections[sectionIndex] && sections[sectionIndex][questionIndex]) {
    currentSection = sectionIndex; // Switch to the correct section
    currentQuestion = questionIndex; // Set to the correct question
    loadQuestion(currentQuestion);
    updateSectionBar(); // Highlight the correct section
} else {
    alert("Invalid question number!");
}
}

// Update Button Status
function updateQuestionPanel() {
for (let i = 1; i <= totalQuestions; i++) {
    const sectionIndex = Math.floor((i - 1) / 25);
    const questionIndex = (i - 1) % 25;
    const qIndex = `${sectionIndex}-${questionIndex}`;
    const btn = document.getElementById(`btn${i}`);

    if (markedForReview.includes(qIndex)) {
        btn.className = "question-btn marked";
    } 
    else if (skippedQuestions.includes(qIndex)) {
        btn.className = "question-btn skipped"; // Set to skipped if question was skipped
    } 
    else if (answers[qIndex]) {
        btn.className = "question-btn answered";
    } 
    else {
        btn.className = "question-btn not-answered";
    }
}
}



// Initialize the test
window.onload = function () {
loadQuestion(currentQuestion);
updateSectionBar();
startTimer();
createQuestionButtons();
updateQuestionPanel();
};

