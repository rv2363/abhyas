const sections = [
    //Maths Section
    [
        {
          "question": "What is 20% of 50?",
          "options": ["5", "10", "15", "20"],
          "answer": "10"
        },
        {
          "question": "If x + 5 = 12, then what is the value of x?",
          "options": ["5", "6", "7", "8"],
          "answer": "7"
        },
        {
          "question": "What is 15 multiplied by 3?",
          "options": ["30", "40", "45", "50"],
          "answer": "45"
        },
        {
          "question": "Find the next number in the sequence: 2, 4, 6, 8, ?",
          "options": ["9", "10", "11", "12"],
          "answer": "10"
        },
        {
          "question": "What is half of 30?",
          "options": ["10", "15", "20", "25"],
          "answer": "15"
        },
        {
          "question": "If a rectangle has length 8 cm and width 5 cm, what is its area?",
          "options": ["13 cm¬≤", "20 cm¬≤", "40 cm¬≤", "80 cm¬≤"],
          "answer": "40 cm¬≤"
        },
        {
          "question": "What is 100 divided by 4?",
          "options": ["15", "20", "25", "30"],
          "answer": "25"
        },
        {
          "question": "What is 7 plus 9?",
          "options": ["14", "15", "16", "17"],
          "answer": "16"
        },
        {
          "question": "If 3x = 18, then what is the value of x?",
          "options": ["4", "5", "6", "7"],
          "answer": "6"
        },
        {
          "question": "What is 5% of 100?",
          "options": ["2", "3", "4", "5"],
          "answer": "5"
        },
        {
          "question": "What is 12 minus 8?",
          "options": ["2", "3", "4", "5"],
          "answer": "4"
        },
        {
          "question": "What is 6 multiplied by 4?",
          "options": ["18", "20", "24", "28"],
          "answer": "24"
        },
        {
          "question": "If x - 3 = 7, then what is the value of x?",
          "options": ["8", "9", "10", "11"],
          "answer": "10"
        },
        {
          "question": "What is 25 plus 15?",
          "options": ["30", "35", "40", "45"],
          "answer": "40"
        },
        {
          "question": "What is 8 divided by 2?",
          "options": ["2", "3", "4", "5"],
          "answer": "4"
        },
        {
          "question": "What is 30% of 20?",
          "options": ["4", "5", "6", "7"],
          "answer": "6"
        },
        {
          "question": "What is 11 plus 6?",
          "options": ["15", "16", "17", "18"],
          "answer": "17"
        },
        {
          "question": "If 4x = 20, then what is the value of x?",
          "options": ["4", "5", "6", "7"],
          "answer": "5"
        },
        {
          "question": "What is 50 divided by 5?",
          "options": ["8", "9", "10", "11"],
          "answer": "10"
        },
        {
          "question": "What is 18 minus 9?",
          "options": ["7", "8", "9", "10"],
          "answer": "9"
        },
        {
          "question": "What is 7 multiplied by 3?",
          "options": ["18", "20", "21", "24"],
          "answer": "21"
        },
        {
          "question": "If x + 8 = 15, then what is the value of x?",
          "options": ["5", "6", "7", "8"],
          "answer": "7"
        },
        {
          "question": "What is 20 plus 12?",
          "options": ["30", "32", "34", "36"],
          "answer": "32"
        },
        {
          "question": "What is 16 divided by 4?",
          "options": ["2", "3", "4", "5"],
          "answer": "4"
        },
        {
          "question": "What is 10% of 60?",
          "options": ["4", "5", "6", "7"],
          "answer": "6"
        }
      ],
    // Reasoning Section
    [
        {
          "question": "Select the related word/letters/number from the given alternatives. 'Book : Pages :: Ladder : ?'",
          "options": ["Steps", "Height", "Wood", "Climb"],
          "answer": "Steps"
        },
        {
          "question": "Choose the missing number: 2, 4, 6, 8, ?",
          "options": ["9", "10", "11", "12"],
          "answer": "10"
        },
        {
          "question": "If 'SUN' is coded as 'TVO', then how will 'CAT' be coded?",
          "options": ["DBU", "DCU", "DBV", "DCV"],
          "answer": "DBU"
        },
        {
          "question": "Find the odd one out: Apple, Banana, Carrot, Grapes",
          "options": ["Apple", "Banana", "Carrot", "Grapes"],
          "answer": "Carrot"
        },
        {
          "question": "If 'A' is 1, 'B' is 2, and 'C' is 3, what is 'DOG' equal to?",
          "options": ["17", "18", "19", "20"],
          "answer": "19"
        },
        {
          "question": "How many vowels are there in the word 'EDUCATION'?",
          "options": ["2", "3", "4", "5"],
          "answer": "5"
        },
        {
          "question": "Complete the series: A, C, E, G, ?",
          "options": ["H", "I", "J", "K"],
          "answer": "I"
        },
        {
          "question": "If 'RED' means 'Green', 'Green' means 'Blue', and 'Blue' means 'Yellow', what color is the sky?",
          "options": ["Red", "Green", "Blue", "Yellow"],
          "answer": "Yellow"
        },
        {
          "question": "What is the next shape in the sequence: Circle, Square, Triangle, Circle, Square, ?",
          "options": ["Circle", "Square", "Triangle", "Rectangle"],
          "answer": "Triangle"
        },
        {
          "question": "Find the number that completes the pattern: 1, 3, 5, ?",
          "options": ["6", "7", "8", "9"],
          "answer": "7"
        },
        {
          "question": "If 'WATER' is written as 'YCVGT', how is 'FIRE' written?",
          "options": ["HKTG", "HJRG", "HJTG", "HKRG"],
          "answer": "HJRG"
        },
        {
          "question": "Which of the following is different from the rest: January, February, June, September?",
          "options": ["January", "February", "June", "September"],
          "answer": "February"
        },
        {
          "question": "If 'PEN' is coded as 16514, then what is 'CAT' coded as?",
          "options": ["3120", "3121", "3119", "3118"],
          "answer": "3120"
        },
        {
          "question": "How many triangles are there in a square?",
          "options": ["2", "4", "6", "8"],
          "answer": "4"
        },
        {
          "question": "Choose the missing letter: B, D, F, H, ?",
          "options": ["I", "J", "K", "L"],
          "answer": "J"
        },
        {
          "question": "If 'TABLE' is '51234' and 'CHAIR' is '67189', then 'TRAIL' is ?",
          "options": ["58194", "59184", "58193", "59183"],
          "answer": "58194"
        },
        {
          "question": "Find the odd number: 12, 18, 24, 25",
          "options": ["12", "18", "24", "25"],
          "answer": "25"
        },
        {
          "question": "Complete the series: Z, X, V, T, ?",
          "options": ["R", "S", "U", "W"],
          "answer": "R"
        },
        {
          "question": "If 'PAPER' is '16116518', what is 'PENCIL'?",
          "options": ["165143912", "165143913", "165143911", "165143910"],
          "answer": "165143912"
        },
        {
          "question": "How many days are there in a leap year?",
          "options": ["364", "365", "366", "367"],
          "answer": "366"
        },
        {
          "question": "Choose the missing number: 10, 20, 30, 40, ?",
          "options": ["45", "50", "55", "60"],
          "answer": "50"
        },
        {
          "question": "If 'MAN' is '13114', then 'WOMAN' is?",
          "options": ["231513114", "231514114", "231513115", "231514115"],
          "answer": "231513114"
        },
        {
          "question": "Find the odd one out: Chair, Table, Sofa, Tree",
          "options": ["Chair", "Table", "Sofa", "Tree"],
          "answer": "Tree"
        },
        {
          "question": "Complete the series: 5, 10, 15, 20, ?",
          "options": ["22", "24", "25", "26"],
          "answer": "25"
        },
        {
          "question": "If 'EYE' is '525', then 'NOSE' is?",
          "options": ["1415195", "1415194", "1415185", "1415184"],
          "answer": "1415195"
        }
      ],

    // GK/GS/Current Affairs Section
    [
        {
          "question": "Which planet is known as the 'Red Planet'?",
          "options": ["Venus", "Mars", "Jupiter", "Saturn"],
          "answer": "Mars"
        },
        {
          "question": "What is the capital city of India?",
          "options": ["Mumbai", "Kolkata", "Delhi", "Chennai"],
          "answer": "Delhi"
        },
        {
          "question": "Which festival is known as the 'Festival of Lights'?",
          "options": ["Holi", "Diwali", "Eid", "Christmas"],
          "answer": "Diwali"
        },
        {
          "question": "Who wrote the Indian National Anthem?",
          "options": ["Mahatma Gandhi", "Rabindranath Tagore", "Jawaharlal Nehru", "Sardar Patel"],
          "answer": "Rabindranath Tagore"
        },
        {
          "question": "Which is the largest ocean in the world?",
          "options": ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
          "answer": "Pacific Ocean"
        },
        {
          "question": "What is the currency of India?",
          "options": ["Dollar", "Euro", "Rupee", "Pound"],
          "answer": "Rupee"
        },
        {
          "question": "Which animal is known as the 'King of the Jungle'?",
          "options": ["Elephant", "Tiger", "Lion", "Giraffe"],
          "answer": "Lion"
        },
        {
          "question": "What is the main source of energy for Earth?",
          "options": ["Moon", "Stars", "Sun", "Wind"],
          "answer": "Sun"
        },
        {
          "question": "Which state is known as the 'Spice Garden of India'?",
          "options": ["Kerala", "Rajasthan", "Punjab", "Gujarat"],
          "answer": "Kerala"
        },
        {
          "question": "How many continents are there in the world?",
          "options": ["5", "6", "7", "8"],
          "answer": "7"
        },
        {
          "question": "Which is the largest desert in the world?",
          "options": ["Sahara Desert", "Gobi Desert", "Arabian Desert", "Antarctic Polar Desert"],
          "answer": "Antarctic Polar Desert"
        },
        {
          "question": "What is the chemical symbol for water?",
          "options": ["CO2", "O2", "H2O", "N2"],
          "answer": "H2O"
        },
        {
          "question": "Which is the tallest mountain in the world?",
          "options": ["K2", "Mount Everest", "Kangchenjunga", "Makalu"],
          "answer": "Mount Everest"
        },
        {
          "question": "What is the national bird of India?",
          "options": ["Sparrow", "Pigeon", "Peacock", "Eagle"],
          "answer": "Peacock"
        },
        {
          "question": "Which city is known as the 'Pink City' of India?",
          "options": ["Jaipur", "Udaipur", "Jodhpur", "Jaisalmer"],
          "answer": "Jaipur"
        },
        {
          "question": "How many days are there in a leap year?",
          "options": ["365", "366", "364", "367"],
          "answer": "366"
        },
        {
          "question": "Which is the largest river in India?",
          "options": ["Yamuna", "Ganga", "Brahmaputra", "Indus"],
          "answer": "Ganga"
        },
        {
          "question": "What is the capital of Japan?",
          "options": ["Beijing", "Seoul", "Tokyo", "Bangkok"],
          "answer": "Tokyo"
        },
        {
          "question": "Which sport is associated with 'Wimbledon'?",
          "options": ["Football", "Cricket", "Tennis", "Basketball"],
          "answer": "Tennis"
        },
        {
          "question": "What is the largest organ in the human body?",
          "options": ["Heart", "Liver", "Skin", "Lungs"],
          "answer": "Skin"
        },
        {
          "question": "Which gas do plants use for photosynthesis?",
          "options": ["Oxygen", "Nitrogen", "Carbon dioxide", "Hydrogen"],
          "answer": "Carbon dioxide"
        },
        {
          "question": "What is the main ingredient of 'paneer'?",
          "options": ["Wheat", "Rice", "Milk", "Potato"],
          "answer": "Milk"
        },
        {
          "question": "Which state is famous for 'Tea' production in India?",
          "options": ["Karnataka", "Assam", "Andhra Pradesh", "Tamil Nadu"],
          "answer": "Assam"
        },
        {
          "question": "What is the shape of Earth?",
          "options": ["Flat", "Square", "Round", "Oval"],
          "answer": "Round"
        },
        {
          "question": "Which is the fastest animal on land?",
          "options": ["Tiger", "Lion", "Cheetah", "Horse"],
          "answer": "Cheetah"
        }
      ],
      [
        {
          "question": "Choose the synonym of 'HAPPY'.",
          "options": ["Sad", "Joyful", "Angry", "Tired"],
          "answer": "Joyful"
        },
        {
          "question": "Choose the antonym of 'BIG'.",
          "options": ["Small", "Large", "Huge", "Tall"],
          "answer": "Small"
        },
        {
          "question": "Fill in the blank: I saw ______ elephant in the zoo.",
          "options": ["a", "an", "the", "no article"],
          "answer": "an"
        },
        {
          "question": "Which word is correctly spelled?",
          "options": ["Friend", "Freind", "Freand", "Frend"],
          "answer": "Friend"
        },
        {
          "question": "What is the plural of 'CHILD'?",
          "options": ["Childs", "Childrens", "Children", "Childes"],
          "answer": "Children"
        },
        {
          "question": "Choose the correct tense: She ______ to school every day.",
          "options": ["went", "goes", "going", "gone"],
          "answer": "goes"
        },
        {
          "question": "Select the correct meaning of 'LOOK AFTER'.",
          "options": ["Ignore", "Take care of", "Hate", "Find"],
          "answer": "Take care of"
        },
        {
          "question": "Choose the one word for 'A person who writes books'.",
          "options": ["Doctor", "Teacher", "Author", "Pilot"],
          "answer": "Author"
        },
        {
          "question": "Fill in the blank: The cat is sitting ______ the table.",
          "options": ["in", "on", "at", "under"],
          "answer": "under"
        },
        {
          "question": "Choose the past tense of 'WRITE'.",
          "options": ["Writes", "Writing", "Written", "Wrote"],
          "answer": "Wrote"
        },
        {
          "question": "Choose the synonym of 'FAST'.",
          "options": ["Slow", "Quick", "Lazy", "Tired"],
          "answer": "Quick"
        },
        {
          "question": "Choose the antonym of 'EASY'.",
          "options": ["Simple", "Hard", "Light", "Soft"],
          "answer": "Hard"
        },
        {
          "question": "Fill in the blank: He is ______ tallest boy in the class.",
          "options": ["a", "an", "the", "no article"],
          "answer": "the"
        },
        {
          "question": "Which word is correctly spelled?",
          "options": ["Beleive", "Believe", "Belive", "Beleev"],
          "answer": "Believe"
        },
        {
          "question": "What is the plural of 'KNIFE'?",
          "options": ["Knifes", "Knives", "Knifees", "Knive"],
          "answer": "Knives"
        },
        {
          "question": "Choose the correct tense: They ______ a movie last night.",
          "options": ["see", "saw", "seeing", "seen"],
          "answer": "saw"
        },
        {
          "question": "Select the correct meaning of 'GIVE UP'.",
          "options": ["Continue", "Surrender", "Find", "Keep"],
          "answer": "Surrender"
        },
        {
          "question": "Choose the one word for 'A place where animals live'.",
          "options": ["School", "Hospital", "Zoo", "Library"],
          "answer": "Zoo"
        },
        {
          "question": "Fill in the blank: She is good ______ singing.",
          "options": ["in", "at", "on", "with"],
          "answer": "at"
        },
        {
          "question": "Choose the past tense of 'TAKE'.",
          "options": ["Takes", "Taking", "Taken", "Took"],
          "answer": "Took"
        },
        {
          "question": "Choose the synonym of 'COLD'.",
          "options": ["Hot", "Warm", "Icy", "Sunny"],
          "answer": "Icy"
        },
        {
          "question": "Choose the antonym of 'NEW'.",
          "options": ["Modern", "Old", "Fresh", "Recent"],
          "answer": "Old"
        },
        {
          "question": "Fill in the blank: Give me ______ glass of water.",
          "options": ["a", "an", "the", "no article"],
          "answer": "a"
        },
        {
          "question": "Which word is correctly spelled?",
          "options": ["Necessary", "Necessery", "Neccessary", "Necassary"],
          "answer": "Necessary"
        },
        {
          "question": "What is the plural of 'FOOT'?",
          "options": ["Foots", "Feet", "Footes", "Feets"],
          "answer": "Feet"
        }
      ]
      
]
let currentSection = 0;
let currentQuestion = 0;
let answers = {};
let markedForReview = [];
let skippedQuestions = [];
let timeLeft = 60 * 60;
let timerInterval;

// Start Timer
function startTimer() {
timerInterval = setInterval(function () {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    document.getElementById("timer").innerText = `Time Left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    if (timeLeft === 0) {
        clearInterval(timerInterval);
        submitTest();
    }
    timeLeft--;
}, 1000);
}

// Load Question
function loadQuestion(index) {
const q = sections[currentSection][index];
document.getElementById("question").innerText = `${getQuestionNumber(index)}. ${q.question}`;
const options = q.options.map((option, i) => `
    <input type="radio" name="answer" id="opt${i}" value="${option}" ${answers[`${currentSection}-${index}`] === option ? "checked" : ""}>
    <label for="opt${i}">${option}</label><br>
`).join("");
document.getElementById("options").innerHTML = options;
}



// Get Correct Question Number
function getQuestionNumber(index) {
return currentSection * 25 + index + 1;
}

// Store Answer
function storeAnswer() {
const selectedOption = document.querySelector('input[name="answer"]:checked');
if (selectedOption) {
    answers[`${currentSection}-${currentQuestion}`] = selectedOption.value;
}
}

// Switch Section
function switchSection(sectionIndex) {
storeAnswer();
currentSection = sectionIndex;
currentQuestion = 0;
loadQuestion(currentQuestion);
updateSectionBar();
}

// Highlight Active Section
function updateSectionBar() {
document.querySelectorAll('.section-bar button').forEach((btn, index) => {
    if (index === currentSection) {
        btn.classList.add('active');
    } else {
        btn.classList.remove('active');
    }
});
}

// Mark for Review
function markForReview() {
const qIndex = `${currentSection}-${currentQuestion}`;
if (!markedForReview.includes(qIndex)) {
    markedForReview.push(qIndex);
    updateReviewList();
    // alert("Question marked for review.");
}
}

// Skip Question
// Skip Question
function skipQuestion() {
const qIndex = `${currentSection}-${currentQuestion}`;

// Add skipped status to the button
if (!skippedQuestions.includes(qIndex)) {
    skippedQuestions.push(qIndex);
}

// Update button color for skipped question
const questionNumber = getQuestionNumber(currentQuestion);
const skippedBtn = document.getElementById(`btn${questionNumber}`);
if (skippedBtn) {
    skippedBtn.classList.add("skipped"); // Add skipped class
}

nextQuestion(); // Move to next question after skipping
}


// Next Question
function nextQuestion() {
storeAnswer();
if (currentQuestion < sections[currentSection].length - 1) {
    currentQuestion++;
    loadQuestion(currentQuestion);
    updateQuestionPanel(); // Update button status
} else {
    alert("You have reached the last question in this section.");
}
}

// Previous Question
function previousQuestion() {
storeAnswer(); // Save current answer before moving
if (currentQuestion > 0) {
    currentQuestion--; // Move to previous question
    loadQuestion(currentQuestion);
    updateQuestionPanel();
} 
else {
    alert("You are at the first question in this section.");
}
}


// Submit Test
function submitTest() {
storeAnswer(); // Save the current answer
clearInterval(timerInterval); // Stop the timer
calculateResult(); // Calculate the result

// Hide modal if visible
const modal = document.getElementById("exitModal");
if (modal) modal.classList.add("hidden");

// Show result and solutions
document.getElementById("result").classList.remove("hidden");
document.getElementById("solutions").classList.remove("hidden");

// Hide navigation and control buttons after submission
document.querySelectorAll(".nav-btn, #markReviewBtn, #skipBtn, #submitBtn").forEach(btn => {
    btn.style.display = "none";
});

// Hide question panel after submission
document.getElementById("questionPanel").style.display = "none";

// Hide question container after submission
document.getElementById("question-container").style.display = "none";

// Hide horizontal panel after submission
 document.querySelector(".panel-container").style.display = "none";

// Hide all section buttons after submission
document.querySelectorAll(".section-bar button").forEach(btn => {
    btn.style.display = "none";
});

 // Hide the section bar itself after submission
 document.querySelector(".section-bar").style.display = "none";

// Hide all other buttons if any
document.querySelectorAll("button").forEach(btn => {
    btn.style.display = "none";
});

// Hide the timer after submission
document.getElementById("timer").style.display = "none";

 // Disable all answer options after submission
disableOptions(); 
}
function confirmExit() {
document.getElementById("exitModal").classList.remove("hidden");
}

function closeExitModal() {
document.getElementById("exitModal").classList.add("hidden");
}


// Calculate Result
function calculateResult() {
let score = 0;
let correctCount = 0;
let wrongCount = 0;
let unattemptedCount = 0;
let totalQuestions = 100; // Total number of questions
let solutionText = "<h3>Solutions:</h3>";
let solutionCounter = 1; // Counter for solution numbering (from 1 to 100)

sections.forEach((section, sIndex) => {
    section.forEach((q, qIndex) => {
        const qID = `${sIndex}-${qIndex}`;
        const userAnswer = answers[qID] || "No Answer";
        const correctAnswer = q.answer;

        // Check correctness
        if (userAnswer === correctAnswer) {
            score += 2; // Correct answer +2
            correctCount++;
            solutionText += `
                <div style="margin-bottom: 10px;">
                    <b>${solutionCounter}. ${q.question}</b><br>
                    Your Answer: <b>${userAnswer}</b> | Correct Answer: <b>${correctAnswer}</b><br>
                    <span style="color:green;">Correct ‚úîÔ∏è (+2)</span>
                </div>`;
        } 
        else if (userAnswer === "No Answer") {
            unattemptedCount++;
            solutionText += `
                <div style="margin-bottom: 10px;">
                    <b>${solutionCounter}. ${q.question}</b><br>
                    <span style="color:orange;">Not Attempted ‚ùó (0)</span><br>
                    Correct Answer: <b>${correctAnswer}</b>
                </div>`;
        } 
        else {
            score -= 0.25; // Wrong answer -0.25
            wrongCount++;
            solutionText += `
                <div style="margin-bottom: 10px;">
                    <b>${solutionCounter}. ${q.question}</b><br>
                    Your Answer: <b>${userAnswer}</b> | Correct Answer: <b>${correctAnswer}</b><br>
                    <span style="color:red;">Wrong ‚ùå (-0.25)</span>
                </div>`;
        }
        solutionCounter++; // Increment solution counter
    });
});

// Calculate total marks out of 200
let totalMarks = 200;

// Display results
document.getElementById("result").innerHTML = `
    <h3>Total Marks: ${score} / ${totalMarks}</h3>
    <div id="summary">
        <p>‚úÖ Correct Answers: <b>${correctCount}</b> | Marks: <b>${correctCount * 2}</b></p>
        <p>‚ùå Wrong Answers: <b>${wrongCount}</b> | Deducted: <b>${(wrongCount * 0.25).toFixed(2)}</b></p>
        <p>‚è© Not Attempted: <b>${unattemptedCount}</b></p>
    </div>
`;
document.getElementById("solutions").innerHTML = solutionText;
}

// Update Review List
function updateReviewList() {
document.getElementById("reviewed-questions").innerHTML = `Marked for Review: ${markedForReview.join(", ")}`;
}

// Disable Options after Submission
function disableOptions() {
document.querySelectorAll('input[name="answer"]').forEach(option => {
    option.disabled = true; // Disable only question options
});
}
function updateQuestionStatus() {
let statusHTML = "";
let totalQuestions = sections.reduce((sum, section) => sum + section.length, 0);

for (let i = 0; i < totalQuestions; i++) {
    const sectionIndex = Math.floor(i / 25);
    const questionIndex = i % 25;
    const qIndex = `${sectionIndex}-${questionIndex}`;
    
    if (markedForReview.includes(qIndex)) {
        statusHTML += `<div class="question-status review">üîç Q${i + 1}: Marked for Review</div>`;
    } 
    else if (answers[qIndex]) {
        statusHTML += `<div class="question-status attempted">‚úÖ Q${i + 1}: Attempted</div>`;
    } 
    else {
        statusHTML += `<div class="question-status not-attempted">‚ùå Q${i + 1}: Not Attempted</div>`;
    }
}
document.getElementById("questionStatusList").innerHTML = statusHTML;
}

// Total number of questions
const totalQuestions = 100;

// Generate question buttons dynamically
function createQuestionButtons() {
const questionPanel = document.getElementById("questionPanel");
questionPanel.innerHTML = ""; // Clear previous buttons

for (let i = 1; i <= totalQuestions; i++) {
    const btn = document.createElement("button");
    btn.innerText = i;
    btn.className = "question-btn";
    btn.id = `btn${i}`;
    btn.onclick = () => handleQuestionClick(i); // Attach click event
    questionPanel.appendChild(btn);
}
}


// Handle Question Button Click
function handleQuestionClick(questionNumber) {
storeAnswer(); // Save current answer before switching
const sectionIndex = Math.floor((questionNumber - 1) / 25); // Get section based on question number
const questionIndex = (questionNumber - 1) % 25; // Get question index in the section

if (sections[sectionIndex] && sections[sectionIndex][questionIndex]) {
    currentSection = sectionIndex; // Switch to the correct section
    currentQuestion = questionIndex; // Set to the correct question
    loadQuestion(currentQuestion);
    updateSectionBar(); // Highlight the correct section
} else {
    alert("Invalid question number!");
}
}

// Update Button Status
function updateQuestionPanel() {
for (let i = 1; i <= totalQuestions; i++) {
    const sectionIndex = Math.floor((i - 1) / 25);
    const questionIndex = (i - 1) % 25;
    const qIndex = `${sectionIndex}-${questionIndex}`;
    const btn = document.getElementById(`btn${i}`);

    if (markedForReview.includes(qIndex)) {
        btn.className = "question-btn marked";
    } 
    else if (skippedQuestions.includes(qIndex)) {
        btn.className = "question-btn skipped"; // Set to skipped if question was skipped
    } 
    else if (answers[qIndex]) {
        btn.className = "question-btn answered";
    } 
    else {
        btn.className = "question-btn not-answered";
    }
}
}



// Initialize the test
window.onload = function () {
loadQuestion(currentQuestion);
updateSectionBar();
startTimer();
createQuestionButtons();
updateQuestionPanel();
};

